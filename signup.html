<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign Up - iGameDB</title>
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@700&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="style.css">
    <style>
        .form-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 60vh;
            padding: 40px 20px;
        }

        .form-wrapper {
            background-color: #1a1a1a;
            border-radius: 30px;
            padding: 40px;
            width: 100%;
            max-width: 400px;
            border: 2px solid #f5c518;
        }

        .form-wrapper .form-title {
            text-align: center;
            margin-bottom: 30px;
            font-size: 28px;
            color: #f5c518;
        }

        .form-subtitle {
            text-align: center;
            margin-bottom: 30px;
            color: #cccccc;
            font-size: 14px;
        }

        .form-field {
            margin-bottom: 20px;
        }

        .form-field label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #ffffff;
        }

        .form-input {
            width: 100%;
            padding: 12px;
            border: 2px solid #f5c518;
            border-radius: 10px;
            background-color: #2a2a2a;
            color: #ffffff;
            font-size: 14px;
            box-sizing: border-box;
        }

        .form-input:focus {
            outline: none;
            background-color: #333333;
            border-color: #ffff00;
        }

        .password-field {
            position: relative;
        }

        .toggle-password {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: #f5c518;
            cursor: pointer;
            font-size: 16px;
        }

        .radio-group {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }

        .radio-label, .checkbox-label {
            display: flex;
            align-items: center;
            gap: 5px;
            color: #ffffff;
        }

        .radio-label input, .checkbox-label input {
            margin: 0;
        }

        .checkbox-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .checkbox-label-full {
            display: flex;
            align-items: flex-start;
            gap: 5px;
            color: #ffffff;
        }

        .checkbox-label-full input {
            margin-top: 2px;
        }

        .btn {
            border: none;
            border-radius: 10px;
            font-weight: bold;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .btn-primary {
            width: 100%;
            padding: 12px;
            background-color: #f5c518;
            color: #000000;
            margin-top: 20px;
        }

        .btn-primary:hover {
            background-color: #ffff00;
        }

        .btn-block {
            width: 100%;
        }

        .form-footer {
            text-align: center;
            margin-top: 20px;
            color: #ffffff;
        }

        .form-footer a {
            color: #f5c518;
            text-decoration: none;
            font-weight: bold;
        }

        .form-footer a:hover {
            text-decoration: underline;
        }

        .error-message {
            background-color: #ff6b6b;
            color: #ffffff;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: none;
        }

        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: #1a1a1a;
            color: #ffffff;
            padding: 12px 20px;
            border-radius: 8px;
            border: 1px solid #f5c518;
            display: none;
            z-index: 1000;
        }
    </style>
</head>
<body>
    <div id="header" class="header">
        <a href="index.html">        
            <img src="images/iGameDB.png" alt="iGameDB Logo">
        </a>
        <div class="search-bar">
            <form onsubmit="handleSearch(event)">
                <input type="text" placeholder="Search..." aria-label="Search games" id="searchInput">
            </form>
        </div>
        <button id="menuToggle" class="menu-toggle" aria-expanded="false" aria-controls="navMenu">‚ò∞</button>

        <nav id="navMenu" class="nav-buttons">
            <a href="wishlist.html" class="wishlist">Wishlist</a>
            <span id="authButtons">
                <a href="signin.html" class="sign-in">Sign In</a>
            </span>
            <span id="userButtons" style="display: none;">
                <button onclick="handleLogout()" class="sign-in" style="background-color: #ff6b6b;">Logout</button>
            </span>
            <a href="about_us.html" class="about-link">About Us</a>


            <div class="settings">
                <button id="settingsToggle" class="settings-btn" aria-expanded="false" aria-controls="settingsMenu">‚ò∞</button>
                <div id="settingsMenu" class="settings-menu" hidden>
                    <label class="setting"><span>Header fixed</span><button type="button" id="headerFixed" class="toggle-btn" aria-pressed="false"></button></label>
                    <label class="setting"><span>Light mode</span><button type="button" id="lightMode" class="toggle-btn" aria-pressed="false"></button></label>
                    <button id="resetSettings" class="reset-btn">Reset</button>
                </div>
            </div>
        </nav>
    </div>

    <!-- Signup Form Container -->
    <div class="form-container">
        <div class="form-wrapper">
            <h2 class="form-title">Create Your Account</h2>
            <p class="form-subtitle">Join thousands of gamers discovering amazing games</p>
            
            <form id="signupForm" class="form-group">
                <!-- Username -->
                <div class="form-field">
                    <label for="username">Username *</label>
                    <input 
                        type="text" 
                        id="username" 
                        name="username" 
                        placeholder="johndoe123"
                        class="form-input"
                    >
                    <span class="error-message" id="usernameError"></span>
                </div>

                <!-- Email -->
                <div class="form-field">
                    <label for="email">Email Address *</label>
                    <input 
                        type="email" 
                        id="email" 
                        name="email" 
                        placeholder="your.email@example.com"
                        class="form-input"
                    >
                    <span class="error-message" id="emailError"></span>
                </div>

                <!-- Password -->
                <div class="form-field">
                    <label for="password">Password *</label>
                    <div class="password-field">
                        <input 
                            type="password" 
                            id="password" 
                            name="password" 
                            placeholder="Min 8 chars, 1 number, 1 uppercase"
                            class="form-input"
                        >
                        <button type="button" id="togglePassword" class="toggle-password">üëÅÔ∏è</button>
                    </div>
                    <span class="error-message" id="passwordError"></span>
                </div>

                <!-- Confirm Password -->
                <div class="form-field">
                    <label for="confirmPassword">Confirm Password *</label>
                    <div class="password-field">
                        <input 
                            type="password" 
                            id="confirmPassword" 
                            name="confirmPassword" 
                            placeholder="Re-enter your password"
                            class="form-input"
                        >
                        <button type="button" id="toggleConfirmPassword" class="toggle-password">üëÅÔ∏è</button>
                    </div>
                    <span class="error-message" id="confirmPasswordError"></span>
                </div>

                <!-- Gender -->
                <div class="form-field">
                    <label>Gender *</label>
                    <div class="radio-group">
                        <label class="radio-label">
                            <input type="radio" name="gender" value="Male">
                            <span>Male</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="gender" value="Female">
                            <span>Female</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="gender" value="Other">
                            <span>Other</span>
                        </label>
                    </div>
                    <span class="error-message" id="genderError"></span>
                </div>

                <!-- Gaming Platform -->
                <div class="form-field">
                    <label>Gaming Platforms *</label>
                    <div class="checkbox-group">
                        <label class="checkbox-label">
                            <input type="checkbox" name="platform" value="PC">
                            <span>PC</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="platform" value="PS5">
                            <span>PS5</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="platform" value="Xbox">
                            <span>Xbox</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="platform" value="Switch">
                            <span>Switch</span>
                        </label>
                    </div>
                    <span class="error-message" id="platformError"></span>
                </div>

                <!-- Terms & Conditions -->
                <div class="form-field">
                    <label class="checkbox-label-full">
                        <input type="checkbox" id="terms" name="terms">
                        <span>I agree to the Terms & Conditions *</span>
                    </label>
                    <span class="error-message" id="termsError"></span>
                </div>

                <!-- Submit Button -->
                <button type="submit" class="btn btn-primary btn-block">Create Account</button>
                
                <!-- Login Link -->
                <p class="form-footer">Already have an account? <a href="signin.html">Login here</a></p>
            </form>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast"></div>

    <footer class="footer">
        <a href="index.html">        
            <img src="images/iGameDB.png" alt="iGameDB Logo">
        </a>
        <div class="footer-buttons">
            <button class="about" onclick="window.location.href='about_us.html'">About Us</button><br>
            <button class="follow">Follow Us</button>
        </div>
    </footer>

    <script>
    if(!window._igdb_header_init){
        window._igdb_header_init = true;
        if(!window.handleSearch) window.handleSearch = function(event){ event.preventDefault(); const input = document.getElementById('searchInput'); if(!input) return; const query = input.value; if(query.trim()) window.location.href = 'searched_for.html?q='+encodeURIComponent(query); };
        if(!window.handleLogout) window.handleLogout = async function(){ if(confirm('Are you sure you want to logout?')){ if(window.authService && authService.logout) await authService.logout(); } };
        if(!window.updateAuthUI) window.updateAuthUI = async function(){ if(!window.authService) return; try{ const user = await authService.getCurrentUser(); if(user){ const ab = document.getElementById('authButtons'); const ub = document.getElementById('userButtons'); if(ab) ab.style.display='none'; if(ub) ub.style.display='inline-block'; } }catch(e){} };
        document.addEventListener('DOMContentLoaded', ()=>{ if(window.authService && authService.handleLoginCallback) authService.handleLoginCallback(); if(window.updateAuthUI) updateAuthUI(); });

        (function(){
            const settingsToggle = document.getElementById('settingsToggle');
            const settingsMenu = document.getElementById('settingsMenu');
            const headerFixedCB = document.getElementById('headerFixed');
            const lightModeCB = document.getElementById('lightMode');
            const resetBtn = document.getElementById('resetSettings');
            const headerEl = document.getElementById('header');
            if(!settingsToggle || !settingsMenu) return;
            function applyHeaderFixed(enabled){ if(!headerEl) return; headerEl.className = enabled ? 'header-fixed' : 'header'; }
            function applyLightMode(enabled){ document.documentElement.classList.toggle('light-mode', enabled); }
            function save(){ if(!headerFixedCB || !lightModeCB) return; localStorage.setItem('igdb_headerFixed', headerFixedCB.getAttribute('aria-pressed')==='true' ? '1':'0'); localStorage.setItem('igdb_lightMode', lightModeCB.getAttribute('aria-pressed')==='true' ? '1':'0'); }
            function load(){ if(!headerFixedCB || !lightModeCB) return; const hf = localStorage.getItem('igdb_headerFixed')==='1'; const lm = localStorage.getItem('igdb_lightMode')==='1'; headerFixedCB.setAttribute('aria-pressed', hf ? 'true':'false'); lightModeCB.setAttribute('aria-pressed', lm ? 'true':'false'); applyHeaderFixed(hf); applyLightMode(lm); }
            settingsToggle.addEventListener('click', ()=>{ const isHidden = settingsMenu.hasAttribute('hidden'); if(isHidden){ settingsMenu.removeAttribute('hidden'); settingsToggle.setAttribute('aria-expanded','true'); } else { settingsMenu.setAttribute('hidden',''); settingsToggle.setAttribute('aria-expanded','false'); } });
            document.addEventListener('click',(e)=>{ if(!settingsMenu.contains(e.target) && e.target !== settingsToggle){ settingsMenu.setAttribute('hidden',''); settingsToggle.setAttribute('aria-expanded','false'); } });
            if(headerFixedCB) headerFixedCB.addEventListener('click', ()=>{ const isPressed = headerFixedCB.getAttribute('aria-pressed')==='true'; headerFixedCB.setAttribute('aria-pressed', !isPressed); applyHeaderFixed(!isPressed); save(); });
            if(lightModeCB) lightModeCB.addEventListener('click', ()=>{ const isPressed = lightModeCB.getAttribute('aria-pressed')==='true'; lightModeCB.setAttribute('aria-pressed', !isPressed); applyLightMode(!isPressed); save(); });
            if(resetBtn) resetBtn.addEventListener('click', ()=>{ localStorage.removeItem('igdb_headerFixed'); localStorage.removeItem('igdb_lightMode'); if(headerFixedCB) headerFixedCB.setAttribute('aria-pressed','false'); if(lightModeCB) lightModeCB.setAttribute('aria-pressed','false'); applyHeaderFixed(false); applyLightMode(false); });
            window.addEventListener('resize', ()=>{ if(headerEl && headerEl.classList.contains('header-fixed')) document.body.style.paddingTop = headerEl.offsetHeight + 'px'; });
            if(document.readyState === 'loading') document.addEventListener('DOMContentLoaded', load); else load();
        })();
        (function(){
            const menuToggle = document.getElementById('menuToggle');
            const navMenu = document.getElementById('navMenu');
            if(!menuToggle || !navMenu) return;
            menuToggle.addEventListener('click', (e)=>{ e.stopPropagation(); const isOpen = navMenu.classList.toggle('open'); menuToggle.setAttribute('aria-expanded', isOpen ? 'true' : 'false'); });
            document.addEventListener('click',(e)=>{ if(!navMenu.contains(e.target) && e.target !== menuToggle){ if(navMenu.classList.contains('open')){ navMenu.classList.remove('open'); menuToggle.setAttribute('aria-expanded','false'); } } });
        })();
    }
    </script>
    <script src="js/signup.js"></script>
</body>
</html>